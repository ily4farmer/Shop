(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{42:function(e,t,c){},43:function(e,t,c){},47:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},57:function(e,t,c){},76:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(19),s=c.n(r),i=(c(42),c(11)),l=c(15),o=(c(43),c(4)),j=c(14),u=(c(47),c.p+"static/media/close.1452bf88.svg"),b=c(1),d=function(e){var t=e.chapter,c=e.setburger;return Object(b.jsx)("div",{className:"burger",children:Object(b.jsxs)("div",{className:"burger-container",children:[Object(b.jsx)("div",{onClick:function(){return c(!1)},className:"burger__btn",children:Object(b.jsx)("img",{src:u,alt:"close"})}),Object(b.jsxs)("nav",{className:"burger__list",children:[Object(b.jsx)("li",{className:"burger__item",children:Object(b.jsx)(j.b,{to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),t.map((function(e){return Object(b.jsx)("li",{className:"burger__item",children:Object(b.jsx)(j.b,{to:"/".concat(e.rid),children:e.rname})},e.rid+1)}))]})]})})},h=c(3),O=(c(51),function(e){var t=e.item,c=Object(o.b)(),a=Object(o.c)((function(e){return e.product})),r=a.product,s=a.isClear,j=Object(n.useState)(""),u=Object(l.a)(j,2),d=u[0],h=u[1];Object(n.useMemo)((function(){s&&h("")}),[s]);return Object(b.jsx)("li",{className:"chapter__item",children:Object(b.jsxs)("form",{className:"form",action:"#",children:[Object(b.jsx)("p",{className:"chapter__id",children:t.gid}),Object(b.jsx)("p",{className:"form__name",children:t.gname}),Object(b.jsx)("p",{className:"form__price",children:t.gprice}),Object(b.jsx)("input",{className:"form__input",value:d,onChange:function(e){return function(e,n){c({type:"CLEAR__INPUT",payload:!1});var a=e.target.value,s=r.filter((function(e){return e.id!==n}));if(a<=0)return h(""),c({type:"PRODUCT_REMOVE",payload:Object(i.a)(s)});h(a);var l=a*t.gprice,o={id:t.gid,price:t.gprice,name:t.gname,amount:a,sum:l};c({type:"PRODUCT_ADD",payload:[].concat(Object(i.a)(s),[o])})}(e,t.gid)},type:"number"}),Object(b.jsx)("p",{className:"form__sum",children:null===d?0:d*t.gprice})]})},t.gid)}),p=a.a.memo(O),m=(c(52),function(e){var t=e.item;return Object(b.jsx)("div",{className:"chapter",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"chapter-block",children:[Object(b.jsx)("h1",{className:"chapter__title",children:t.rname}),Object(b.jsx)("ul",{className:"chapter__list",children:t.goods.map((function(e){return Object(b.jsx)(p,{item:e},e.gid)}))})]})})})}),f=(c(53),function(){return Object(b.jsx)("section",{className:"home",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"home-block",children:[Object(b.jsx)("h1",{className:"home__title",children:"Shop"}),Object(b.jsx)("p",{className:"home__subtitle",children:"\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u043c\u0430\u0433\u0430\u0437\u0438\u043d \u043f\u0440\u043e\u0438\u0437\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0445 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439"})]})})})}),_=function(e){var t=e.chapter;return Object(b.jsxs)(h.c,{children:[Object(b.jsx)(h.a,{path:"/",component:f,exact:!0}),t.map((function(e){return Object(b.jsx)(h.a,{path:"/".concat(e.rid),exact:!0,children:Object(b.jsx)(m,{item:e},e)},e)}))]})},x=(c(54),c.p+"static/media/menu.5353ca00.svg"),v=c.p+"static/media/basket.adcc4036.svg",g=(c(55),function(e){var t=e.setHide,c=Object(o.b)(),n=Object(o.c)((function(e){return e.basket.basket}));return Object(b.jsx)("section",{className:"basket",children:Object(b.jsxs)("div",{className:"basket-block",children:[Object(b.jsx)("img",{onClick:function(){return t(!1)},className:"basket__btn",src:u,alt:"close"}),n.length<=0?Object(b.jsx)("h3",{className:"basket__empty",children:"\u041f\u0443\u0441\u0442\u043e"}):Object(b.jsxs)("div",{className:"basket__wrapper",children:[Object(b.jsx)("ul",{className:"basket__list",children:n.map((function(e){return Object(b.jsxs)("li",{className:"basket__item",children:[Object(b.jsx)("span",{children:e.name}),Object(b.jsxs)("span",{children:["\u041a-\u0432\u043e: ",e.amount]})]},e.id)}))}),Object(b.jsx)("div",{className:"basket__footer",children:Object(b.jsx)("button",{onClick:function(){c({type:"REMOVE__BASKET",payload:[]}),c({type:"PRODUCT_REMOVE",payload:[]}),c({type:"CLEAR__INPUT",payload:!0})},className:"basket__pay",children:"\u041a\u0443\u043f\u0438\u0442\u044c"})})]})]})})}),N=function(e){var t=e.setburger,c=Object(n.useState)(!1),a=Object(l.a)(c,2),r=a[0],s=a[1],i=Object(o.c)((function(e){return e.basket.basket}));return Object(b.jsx)("header",{className:"header",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"header-block",children:[Object(b.jsx)("div",{onClick:function(){return t(!0)},className:"header__btn",children:Object(b.jsx)("img",{src:x,alt:"menu"})}),Object(b.jsxs)("div",{onClick:function(){return s(!0)},className:"header__basket",children:[Object(b.jsx)("img",{src:v,alt:"basket"}),Object(b.jsx)("div",{style:{display:i.length>0?"flex":"none"},className:"header__counter",children:i.length})]}),r?Object(b.jsx)(g,{setHide:s}):null]})})})},k=c(26),y=c.n(k),E=c(21),C=c(35),T=(c(57),function(){var e=Object(o.c)((function(e){return e.product.product})),t=Object(i.a)(e),c=0;if(t.length>0){var n,a=t.map((function(e){return e.sum})),r=Object(E.a)(a);try{for(r.s();!(n=r.n()).done;){c+=n.value}}catch(s){r.e(s)}finally{r.f()}}return Object(b.jsxs)("span",{children:["\u041e\u0431\u0449\u0430\u044f\u044f \u0441\u0443\u043c\u043c\u0430: ",e.length>0?c:null]})}),R=c(36),D=c.n(R),A=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.product.product}));function c(){return(c=Object(C.a)(y.a.mark((function c(){var n,a,r,s;return y.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(0!==t.length){c.next=2;break}return c.abrupt("return",console.log("\u043f\u0443\u0441\u0442\u043e"));case 2:n=new FormData,a=Object(E.a)(t);try{for(a.s();!(r=a.n()).done;)s=r.value,n.append("product[".concat(s.id,"]"),s.amount)}catch(l){a.e(l)}finally{a.f()}return c.next=7,D()({method:"post",url:"https://datainlife.ru/junior_task/add_basket.php",data:n,headers:{"Content-Type":"multipart/form-data"}}).then((function(c){console.log(c);var n=t.map((function(e){return e}));e({type:"ADD__BASKET",payload:Object(i.a)(n)})})).catch((function(e){console.log(e)}));case 7:case"end":return c.stop()}}),c)})))).apply(this,arguments)}return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"footer-block",children:[Object(b.jsx)(T,{}),Object(b.jsx)("button",{onClick:function(){return c.apply(this,arguments)},className:"footer__btn",children:"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})})})},P=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.chapter.chapter})),c=Object(n.useState)(!1),a=Object(l.a)(c,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){fetch("https://datainlife.ru/junior_task/get_products.php").then((function(e){return e.json()})).then((function(t){e({type:"GET__CHAPTER",payload:Object(i.a)(t)})}))}),[e]),Object(b.jsxs)(j.a,{children:[Object(b.jsx)(N,{setburger:s}),r?Object(b.jsx)(d,{setburger:s,chapter:t}):null,Object(b.jsx)(_,{chapter:t}),Object(b.jsx)(A,{})]})},w=c(16),S=c(37),U=c(5),M={basket:[]},B="ADD__BASKET",V="REMOVE__BASKET",H={chapter:[]},I="GET__CHAPTER",K={product:[],isClear:!1},L="PRODUCT_ADD",G="PRODUCT_REMOVE",J="CLEAR__INPUT",F=Object(w.combineReducers)({chapter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(U.a)(Object(U.a)({},e),{},{chapter:t.payload});default:return e}},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:case G:return Object(U.a)(Object(U.a)({},e),{},{product:t.payload});case J:return Object(U.a)(Object(U.a)({},e),{},{isClear:t.payload});default:return e}},basket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:case V:return Object(U.a)(Object(U.a)({},e),{},{basket:t.payload});default:return e}}}),W=Object(w.createStore)(F,Object(S.composeWithDevTools)());s.a.render(Object(b.jsx)(o.a,{store:W,children:Object(b.jsx)(P,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.2ef55512.chunk.js.map