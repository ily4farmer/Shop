(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{42:function(e,t,c){},43:function(e,t,c){},47:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},57:function(e,t,c){},76:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(19),r=c.n(a),s=(c(42),c(11)),i=c(15),l=(c(43),c(4)),o=c(14),j=(c(47),c.p+"static/media/close.1452bf88.svg"),u=c(1),b=function(e){var t=e.chapter,c=e.setburger;return Object(u.jsx)("div",{className:"burger",children:Object(u.jsxs)("div",{className:"burger-container",children:[Object(u.jsx)("div",{onClick:function(){return c(!1)},className:"burger__btn",children:Object(u.jsx)("img",{src:j,alt:"close"})}),Object(u.jsxs)("nav",{className:"burger__list",children:[Object(u.jsx)("li",{className:"burger__item",children:Object(u.jsx)(o.b,{to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),t.map((function(e){return Object(u.jsx)("li",{className:"burger__item",children:Object(u.jsx)(o.b,{to:"/".concat(e.rid),children:e.rname})},e.rid+1)}))]})]})})},d=c(3),h=(c(51),function(e){var t=e.item,c=Object(l.b)(),a=Object(l.c)((function(e){return e.product})),r=a.product,o=a.isClear,j=Object(n.useState)(""),b=Object(i.a)(j,2),d=b[0],h=b[1];Object(n.useMemo)((function(){o&&h("")}),[o]);return Object(u.jsx)("li",{className:"chapter__item",children:Object(u.jsxs)("form",{className:"form",action:"#",children:[Object(u.jsx)("p",{className:"chapter__id",children:t.gid}),Object(u.jsx)("p",{className:"form__name",children:t.gname}),Object(u.jsx)("p",{className:"form__price",children:t.gprice}),Object(u.jsx)("input",{className:"form__input",value:d,onChange:function(e){return function(e,n){c({type:"CLEAR__INPUT",payload:!1});var a=e.target.value,i=r.filter((function(e){return e.id!==n}));if(a<=0)return h(""),c({type:"PRODUCT_REMOVE",payload:Object(s.a)(i)});h(a);var l=a*t.gprice,o={id:t.gid,price:t.gprice,name:t.gname,amount:a,sum:l};c({type:"PRODUCT_ADD",payload:[].concat(Object(s.a)(i),[o])})}(e,t.gid)},type:"number"}),Object(u.jsx)("p",{className:"form__sum",children:null===d?0:d*t.gprice})]})},t.gid)}),O=(c(52),function(e){var t=e.item;return Object(u.jsx)("div",{className:"chapter",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"chapter-block",children:[Object(u.jsx)("h1",{className:"chapter__title",children:t.rname}),Object(u.jsx)("ul",{className:"chapter__list",children:t.goods.map((function(e){return Object(u.jsx)(h,{item:e},e.gid)}))})]})})})}),p=(c(53),function(){return Object(u.jsx)("section",{className:"home",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"home-block",children:[Object(u.jsx)("h1",{className:"home__title",children:"Shop"}),Object(u.jsx)("p",{className:"home__subtitle",children:"\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u043c\u0430\u0433\u0430\u0437\u0438\u043d \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0445 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439"})]})})})}),m=function(e){var t=e.chapter;return Object(u.jsxs)(d.c,{children:[Object(u.jsx)(d.a,{path:"/",component:p,exact:!0}),t.map((function(e){return Object(u.jsx)(d.a,{path:"/".concat(e.rid),exact:!0,children:Object(u.jsx)(O,{item:e},e)},e)}))]})},f=(c(54),c.p+"static/media/menu.5353ca00.svg"),_=c.p+"static/media/basket.adcc4036.svg",x=(c(55),function(e){var t=e.setHide,c=Object(l.b)(),n=Object(l.c)((function(e){return e.basket.basket}));return Object(u.jsx)("section",{className:"basket",children:Object(u.jsxs)("div",{className:"basket-block",children:[Object(u.jsx)("img",{onClick:function(){return t(!1)},className:"basket__btn",src:j,alt:"close"}),n.length<=0?Object(u.jsx)("h3",{className:"basket__empty",children:"\u041f\u0443\u0441\u0442\u043e"}):Object(u.jsxs)("div",{className:"basket__wrapper",children:[Object(u.jsx)("ul",{className:"basket__list",children:n.map((function(e){return Object(u.jsxs)("li",{className:"basket__item",children:[Object(u.jsx)("span",{children:e.name}),Object(u.jsxs)("span",{children:["\u041a-\u0432\u043e: ",e.amount]})]},e.id)}))}),Object(u.jsx)("div",{className:"basket__footer",children:Object(u.jsx)("button",{onClick:function(){c({type:"REMOVE__BASKET",payload:[]}),c({type:"PRODUCT_REMOVE",payload:[]}),c({type:"CLEAR__INPUT",payload:!0})},className:"basket__pay",children:"\u041a\u0443\u043f\u0438\u0442\u044c"})})]})]})})}),v=function(e){var t=e.setburger,c=Object(n.useState)(!1),a=Object(i.a)(c,2),r=a[0],s=a[1],o=Object(l.c)((function(e){return e.basket.basket}));return Object(u.jsx)("header",{className:"header",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"header-block",children:[Object(u.jsx)("div",{onClick:function(){return t(!0)},className:"header__btn",children:Object(u.jsx)("img",{src:f,alt:"menu"})}),Object(u.jsxs)("div",{onClick:function(){return s(!0)},className:"header__basket",children:[Object(u.jsx)("img",{src:_,alt:"basket"}),Object(u.jsx)("div",{style:{display:o.length>0?"flex":"none"},className:"header__counter",children:o.length})]}),r?Object(u.jsx)(x,{setHide:s}):null]})})})},g=c(26),N=c.n(g),k=c(21),y=c(35),E=(c(57),function(){var e=Object(l.c)((function(e){return e.product.product})),t=Object(s.a)(e),c=0;if(t.length>0){var n,a=t.map((function(e){return e.sum})),r=Object(k.a)(a);try{for(r.s();!(n=r.n()).done;){c+=n.value}}catch(i){r.e(i)}finally{r.f()}}return Object(u.jsxs)("span",{children:["\u041e\u0431\u0449\u0430\u044f\u044f \u0441\u0443\u043c\u043c\u0430: ",e.length>0?c:null]})}),C=c(36),T=c.n(C),R=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.product.product}));function c(){return(c=Object(y.a)(N.a.mark((function c(){var n,a,r,i;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(0!==t.length){c.next=2;break}return c.abrupt("return",console.log("\u043f\u0443\u0441\u0442\u043e"));case 2:n=new FormData,a=Object(k.a)(t);try{for(a.s();!(r=a.n()).done;)i=r.value,n.append("product[".concat(i.id,"]"),i.amount)}catch(l){a.e(l)}finally{a.f()}return c.next=7,T()({method:"post",url:"https://datainlife.ru/junior_task/add_basket.php",data:n,headers:{"Content-Type":"multipart/form-data"}}).then((function(c){console.log(c);var n=t.map((function(e){return e}));e({type:"ADD__BASKET",payload:Object(s.a)(n)})})).catch((function(e){console.log(e)}));case 7:case"end":return c.stop()}}),c)})))).apply(this,arguments)}return Object(u.jsx)("footer",{className:"footer",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"footer-block",children:[Object(u.jsx)(E,{}),Object(u.jsx)("button",{onClick:function(){return c.apply(this,arguments)},className:"footer__btn",children:"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})})})},D=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.chapter.chapter})),c=Object(n.useState)(!1),a=Object(i.a)(c,2),r=a[0],j=a[1];return Object(n.useEffect)((function(){fetch("https://datainlife.ru/junior_task/get_products.php").then((function(e){return e.json()})).then((function(t){e({type:"GET__CHAPTER",payload:Object(s.a)(t)})}))}),[e]),Object(u.jsxs)(o.a,{children:[Object(u.jsx)(v,{setburger:j}),r?Object(u.jsx)(b,{setburger:j,chapter:t}):null,Object(u.jsx)(m,{chapter:t}),Object(u.jsx)(R,{})]})},A=c(16),P=c(37),w=c(5),S={basket:[]},U="ADD__BASKET",M="REMOVE__BASKET",B={chapter:[]},V="GET__CHAPTER",H={product:[],isClear:!1},I="PRODUCT_ADD",K="PRODUCT_REMOVE",L="CLEAR__INPUT",G=Object(A.combineReducers)({chapter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(w.a)(Object(w.a)({},e),{},{chapter:t.payload});default:return e}},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:case K:return Object(w.a)(Object(w.a)({},e),{},{product:t.payload});case L:return Object(w.a)(Object(w.a)({},e),{},{isClear:t.payload});default:return e}},basket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:case M:return Object(w.a)(Object(w.a)({},e),{},{basket:t.payload});default:return e}}}),J=Object(A.createStore)(G,Object(P.composeWithDevTools)());r.a.render(Object(u.jsx)(l.a,{store:J,children:Object(u.jsx)(D,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.be54b6fa.chunk.js.map